@model Data.DTOs.UserDTO

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
    <title>Afluex Multiservice llp</title>
    <!-- General CSS Files -->
    <link rel="stylesheet" href="~/assets/css/app.min.css">
    <!-- Template CSS -->
    <link rel="stylesheet" href="~/assets/css/style.css">
    <link rel="stylesheet" href="~/assets/css/components.css">
    <link rel="stylesheet" href="~/assets/bundles/izitoast/css/iziToast.min.css">
    <!-- Custom style CSS -->
    <link rel="stylesheet" href="~/assets/css/custom.css">
</head>

<body>
    @using (Html.BeginForm("EmployeeRegistration", "Hi", FormMethod.Post, new { @class = "needs-validation", @novalidate = "", @enctype = "multipart/form-data" }))
    {
        if (TempData["msg"] != null)
        {
            <div style="display:none">
                @TempData["msg"]
            </div>
        }
        @Html.HiddenFor(m => m.Id)
        <div class="loader"></div>
        <div id="app">
            <section class="section">
                <div class="container mt-5">
                    <div class="row">
                        <div class="col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2">
                            <div class="card card-primary">
                                <div class="card-header">
                                    <h4>नियोक्ता के रूप में पंजीकृत करें</h4>
                                </div>
                                <div class="card-body">
                                    <form method="POST">
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Name">पहला नाम <span style="color:red">*</span></label>
                                                @Html.HiddenFor(m => m.UserAgent)
                                                @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control", @required = "true" })
                                                <div class="invalid-feedback">
                                                    कृपया पहला नाम दर्ज करें !
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Name">अंतिम नाम</label>
                                                @Html.HiddenFor(m => m.UserAgent)
                                                @Html.TextBoxFor(m => m.LastName, new { @class = "form-control"})
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Mobile">संपर्क नंबर <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control", @required = "true", @MaxLength = "10" })
                                                <div class="invalid-feedback">
                                                    कृपया संपर्क नंबर दर्ज करें!
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Email">ईमेल <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @type = "email", @required = "true" })
                                                <div class="invalid-feedback">
                                                    कृपया वैध ईमेल दर्ज़ करें!
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Email">पासवर्ड <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Password, new { @class = "form-control", @type = "password", @required = "true", @onBlur = "return checkPasswordStrength()" })
                                                <div class="invalid-feedback">
                                                    कृपया मान्य पासवर्ड दर्ज करें!
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Address">पासवर्ड की पुष्टि कीजिये <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.ConfirmPassword, new { @class = "form-control", @type = "password", @required = "true", @onchange = "return validateConfPassword();" })
                                            </div>
                                            <div class="invalid-feedback">
                                                कृपया मान्य पासवर्ड पुनः दर्ज करें!
                                            </div>
                                        </div>
                                        <div class="row">

                                            <div class="form-group col-6">
                                                <label>राज्य</label>
                                                @Html.DropDownListFor(m => m.State, new SelectList(ViewBag.State, "Id", "Name"), new { @class = "form-control" })
                                            </div>
                                            <div class="form-group col-6">
                                                <label>शहर <span style="color:red">*</span></label>
                                                @Html.DropDownListFor(m => m.CityId, new SelectList(ViewBag.City, "Id", "Name"), new { @class = "form-control", @required = "" })
                                                <div class="invalid-feedback">
                                                    कृपया शहर चुनें!
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Address">स्थान</label>
                                                @Html.DropDownListFor(m => m.LocationId, new SelectList(ViewBag.Location, "Id", "Name"), "--चुनें--", new { @class = "form-control", @required = "" })
                                                <div class="invalid-feedback">
                                                    कृपया स्थान चुनें!
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label>पिन कोड</label>
                                                @Html.TextBoxFor(m => m.PinCode, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label for="Address">पता</label>
                                                @Html.TextAreaFor(m => m.Address, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        @*<div class="row">
                                            <div class="form-group col-6">
                                                <label for="Name">अक्षांश <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Lat, new { @class = "form-control" })
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Name">देशान्तर</label>
                                                @Html.TextBoxFor(m => m.Long, new { @class = "form-control" })
                                            </div>
                                        </div>*@
                                        <div class="row">
                                            <div class="form-group col-4">
                                                <label for="Name">कंपनी का नाम <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.CompanyName, new { @class = "form-control", @required = "true" })
                                                <div class="invalid-feedback">
                                                    कृपया कंपनी का नाम दर्ज करें !
                                                </div>
                                            </div>
                                            <div class="form-group col-4">
                                                <label for="Name">कंपनी का प्रकार<span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.CompanyType, new { @class = "form-control" })
                                            </div>
                                            <div class="form-group col-4">
                                                <label for="Name">कर्मचारियों की संख्या<span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.NoOfEmployees, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label>पैन अपलोड करें</label>
                                                <input type="file" class="form-control" id="postedPan" name="postedPan" />
                                            </div>
                                            <div class="form-group col-6">
                                                <label>आधार अपलोड करें</label>
                                                <input type="file" class="form-control" id="postedAadhar" name="postedAadhar" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label>फोटो अपलोड करें</label>
                                                <input type="file" class="form-control" id="postedFile" name="postedFile" />
                                            </div>
                                            <div class="form-group col-6">
                                                <label>कंपनी प्रमाणपत्र अपलोड करें</label>
                                                <input type="file" class="form-control" id="postedCompanyCertificate" name="postedCompanyCertificate" />
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label>आपके के बारे में</label>
                                                @Html.TextAreaFor(m => m.About, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            @Html.AntiForgeryToken()
                                            <button type="submit" class="btn btn-primary btn-lg btn-block">
                                                पंजीकरण
                                            </button>
                                        </div>
                                    </form>
                                </div>
                                <div class="mb-4 text-muted text-center">
                                    पहले से पंजीकृत? <a href="/Hi/Login">लॉगइन करें</a>
                                </div>
                                <div class="mb-4 text-muted text-center">
                                    <a href="/hi/Index">होम पे जाएँ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    }
    <!-- General JS Scripts -->
    <script src="~/scripts/jquery-1.10.2.js"></script>
    <script src="~/assets/js/app.min.js"></script>
    <!-- JS Libraies -->
    <script src="~/assets/js/iziToast.min.js"></script>
    <!-- Page Specific JS File -->
    <!-- Template JS File -->
    <script src="~/assets/js/scripts.js"></script>
    <!-- Custom JS File -->
    <script src="~/assets/js/custom.js"></script>
    <script>
        function validateConfPassword() {
            var password = $('#Password').val();
            var ConfirmPassword = $('#ConfirmPassword').val();
            if (password != ConfirmPassword) {
                iziToast.warning({
                    title: "Alert!",
                    message: "नया पासवर्ड और पुष्टि पासवर्ड अलग-अलग हैं",
                    position: "topRight",
                });
                $('#Password').val('');
                $('#ConfirmPassword').val('');
                return false;
            }
        }
    </script>
    <script>
        $(document).ready(function () {
            debugger
            $("#divload").css({ 'display': 'none' });
            var userAgent = navigator.userAgent;
            $('#UserAgent').val(userAgent);

            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#ContentPlaceHolder1_imgProductImage')
                            .attr('src', e.target.result);
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            }

            $("#postedFile").change(function () {
                var file = $("#postedFile").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'केवल इमेज फ़ाइल की अनुमति है !', 'warning').then((value) => {
                        $("#postedFile").val('');
                    })
                }
            });
            $("#postedPan").change(function () {
                var file = $("#postedPan").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'केवल इमेज फ़ाइल की अनुमति है !', 'warning').then((value) => {
                        $("#postedPan").val('');
                    })
                }
            });
            $("#postedAadhar").change(function () {
                var file = $("#postedAadhar").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'केवल इमेज फ़ाइल की अनुमति है !', 'warning').then((value) => {
                        $("#postedAadhar").val('');
                    })
                }
            });
            $("#postedCompanyCertificate").change(function () {
                var file = $("#postedCompanyCertificate").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'केवल इमेज फ़ाइल की अनुमति है !', 'warning').then((value) => {
                        $("#postedCompanyCertificate").val('');
                    })

                }
            });

            $("#LocationId").change(function () {
                $.ajax({
                    url: "/hi/GetPinByLocation",
                    type: "POST",
                    dataType: 'JSON',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    data: { Id: $("#LocationId").val() },
                    success: function (data) {
                        console.log(data)
                        if (data!= null) {
                            $("#PinCode").val(data);
                        }
                        else {

                        }
                    }
                })
            })
        })
        

        function checkPasswordStrength() {
            var number = /([0-9])/;
            var alphabetsC = /([A-Z])/;
            var alphabetsL = /([a-z])/;
            var special_characters = /([~,!,@@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;
            if ($('#Password').val().length < 8) {
                iziToast.warning({
                    title: "Weak Password!",
                    message: "should be atleast 8 characters.",
                    position: "topRight",
                });
                $('#Password').val('');
                $('#ConfirmPassword').val('');
                $('#Password').focus();
                return false;
            } else {
                if ($('#Password').val().match(number) && $('#Password').val().match(alphabetsC) && $('#Password').val().match(alphabetsL) && $('#Password').val().match(special_characters)) {
                    return true;
                } else {
                    iziToast.warning({
                        title: "Weak Password!",
                        message: "Should include one capital alphabet, one small alphabet, numbers and special characters.",
                        position: "topRight",
                    });
                    $('#Password').val('');
                    $('#ConfirmPassword').val('');
                    $('#Password').focus();
                    return false;
                }
            }
        }
        $(document).ready(function () {
            $("input:text,form").attr("autocomplete", "off");
        })

    </script>
    @if (TempData["msg"] == "Saved")
    {
        <script type="text/javascript">
            window.onload = function () {
                iziToast.success({
                    title: "सफल !",
                    message: "आपका पंजीकरण सफलतापूर्वक हो गया है |",
                    position: "topRight",
                });
            };

        </script>
    }
    @if (TempData["msg"] == "Not Registered !")
    {
        <script type="text/javascript">
            window.onload = function () {
                iziToast.warning({
                    title: "त्रुटि !",
                    message: 'आपका पंजीकरण नहीं हुआ |',
                    position: "topRight",
                });
            };

        </script>
    }
    @if (TempData["msg"] == "Already Registered !")
    {
        <script type="text/javascript">
            window.onload = function () {
                iziToast.warning({
                    title: "चेतावनी !",
                    message: 'पहले से पंजीकृत',
                    position: "topRight",
                });
            };

        </script>
    }
</body>

</html>