@model Data.DTOs.UpdateUserDTO

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no" name="viewport">
    <title>Afluex Multiservice llp</title>
    <!-- General CSS Files -->
    <link rel="stylesheet" href="~/assets/css/app.min.css">
    <!-- Template CSS -->
    <link rel="stylesheet" href="~/assets/css/style.css">
    <link rel="stylesheet" href="~/assets/css/components.css">
    <link rel="stylesheet" href="~/assets/bundles/izitoast/css/iziToast.min.css">
    <!-- Custom style CSS -->
    <link rel="stylesheet" href="~/assets/css/custom.css">
</head>

<body>
    @using (Html.BeginForm("EmployeeRegistration", "en", FormMethod.Post, new { @class = "needs-validation", @novalidate = "", @enctype = "multipart/form-data" }))
    {
        if (TempData["msg"] != null)
        {
            <div style="display:none">
                @TempData["msg"]
            </div>
        }
        @Html.HiddenFor(m => m.Id)
        <div class="loader"></div>
        <div id="app">
            <section class="section">
                <div class="container mt-5">
                    <div class="row">
                        <div class="col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2">
                            <div class="card card-primary">
                                <div class="card-header">
                                    <h4>Register as an Employer</h4>
                                </div>
                                <div class="card-body">
                                    <form method="POST">
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Name">First Name <span style="color:red">*</span></label>
                                                @Html.HiddenFor(m => m.UserAgent)
                                                @Html.TextBoxFor(m => m.FirstName, new { @class = "form-control", @required = "true" })
                                                <div class="invalid-feedback">
                                                    Please Enter Name !
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Name">Last Name</label>
                                                @Html.TextBoxFor(m => m.LastName, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Mobile">Contact No. <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Mobile, new { @class = "form-control", @required = "true", @MaxLength = "10" })
                                                <div class="invalid-feedback">
                                                    Please Enter Contact No.!
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Email">Email <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @type = "email", @required = "true" })
                                                <div class="invalid-feedback">
                                                    Please Enter Valid Email!
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Email">Password <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.Password, new { @class = "form-control", @type = "password", @required = "true", @onBlur = "return checkPasswordStrength()" })
                                                <div class="invalid-feedback">
                                                    Please Enter Valid Password!
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label for="Address">Confirm Password <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.ConfirmPassword, new { @class = "form-control", @type = "password", @required = "true", @onchange = "return validateConfPassword();" })
                                                <div class="invalid-feedback">
                                                    Please Re-enter Passowrd!
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">

                                            <div class="form-group col-6">
                                                <label>State</label>
                                                @Html.DropDownListFor(m => m.State, new SelectList(ViewBag.State, "Id", "Name"), new { @class = "form-control" })
                                            </div>
                                            <div class="form-group col-6">
                                                <label>City <span style="color:red">*</span></label>
                                                @Html.DropDownListFor(m => m.CityId, new SelectList(ViewBag.City, "Id", "Name"), new { @class = "form-control", @required = "" })
                                                <div class="invalid-feedback">
                                                    Please Select City!
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label for="Address">Location</label>
                                                @Html.DropDownListFor(m => m.LocationId, new SelectList(ViewBag.Location, "Id", "Name"), "--Select--", new { @class = "form-control", @required = "" })
                                                <div class="invalid-feedback">
                                                    Please Select Location!
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label>Pin Code</label>
                                                @Html.TextBoxFor(m => m.PinCode, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label for="Address">Address</label>
                                                @Html.TextAreaFor(m => m.Address, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        @*<div class="row">
                                                <div class="form-group col-6">
                                                    <label for="Name">Latitude</label>
                                                    @Html.TextBoxFor(m => m.Lat, new { @class = "form-control" })
                                                </div>
                                                <div class="form-group col-6">
                                                    <label for="Name">Longtitude</label>
                                                    @Html.TextBoxFor(m => m.Long, new { @class = "form-control" })
                                                </div>
                                            </div>*@
                                        <div class="row">
                                            <div class="form-group col-4">
                                                <label for="Name">Company Name <span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.CompanyName, new { @class = "form-control", @required = "true" })
                                                <div class="invalid-feedback">
                                                    Please Enter Company Name !
                                                </div>
                                            </div>
                                            <div class="form-group col-4">
                                                <label for="Name">Type of Company<span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.CompanyType, new { @class = "form-control" })
                                            </div>
                                            <div class="form-group col-4">
                                                <label for="Name">No. of Employees<span style="color:red">*</span></label>
                                                @Html.TextBoxFor(m => m.NoOfEmployees, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label>Upload PAN</label>
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="postedPan" name="postedPan" />
                                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label>Upload Aadhar</label>
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="postedAadhar" name="postedAadhar" />
                                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-6">
                                                <label>Upload Photo</label>
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="postedFile" name="postedFile" />
                                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                                </div>
                                            </div>
                                            <div class="form-group col-6">
                                                <label>Upload Compnay Certificate</label>
                                                <div class="custom-file">
                                                    <input type="file" class="custom-file-input" id="postedCompanyCertificate" name="postedCompanyCertificate" />
                                                    <label class="custom-file-label" for="customFile">Choose file</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label>About</label>
                                                @Html.TextAreaFor(m => m.About, new { @class = "form-control" })
                                            </div>
                                        </div>
                                        @*<div class="row">
                                                <div class="form-group col-6">
                                                    <label>Password</label>
                                                    <div class="input-group">
                                                        <div class="input-group-prepend">
                                                            <div class="input-group-text">
                                                                <i class="fas fa-lock"></i>
                                                            </div>
                                                        </div>
                                                        @Html.TextBoxFor(m=>m.Password, new{@class="form-control pwstrength",@type="password"})
                                                    </div>
                                                    <div id="pwindicator" class="pwindicator">
                                                        <div class="bar"></div>
                                                        <div class="label"></div>
                                                    </div>
                                                </div>
                                                <div class="form-group col-6">
                                                    <label for="password2" class="d-block">Password Confirmation</label>
                                                    <input id="password2" type="password" class="form-control" name="password-confirm">
                                                </div>
                                            </div>*@
                                        <div class="form-group">
                                            @Html.AntiForgeryToken()
                                            <button type="submit" class="btn btn-primary btn-lg btn-block">
                                                Register
                                            </button>
                                        </div>
                                    </form>
                                </div>
                                <div class="mb-4 text-muted text-center">
                                    Already Registered? <a href="/en/Login">Login</a>
                                </div>
                                <div class="mb-4 text-muted text-center">
                                    <a href="/en/Index">Back to Home</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    }
    <!-- General JS Scripts -->
    <script src="~/scripts/jquery-1.10.2.js"></script>
    <script src="~/assets/js/app.min.js"></script>
    <!-- JS Libraies -->
    <script src="~/assets/js/iziToast.min.js"></script>
    <!-- Page Specific JS File -->
    <!-- Template JS File -->
    <script src="~/assets/js/scripts.js"></script>
    <!-- Custom JS File -->
    <script src="~/assets/js/custom.js"></script>
    <script src="~/assets/bundles/sweetalert/sweetalert.min.js"></script>
    <script>
        function validateConfPassword() {
            var password = $('#Password').val();
            var ConfirmPassword = $('#ConfirmPassword').val();
            if (password != ConfirmPassword) {
                iziToast.warning({
                    title: "Alert!",
                    message: "New Password and Confirm Password are different",
                    position: "topRight",
                });
                $('#Password').val('');
                $('#ConfirmPassword').val('');
                return false;
            }
        }
    </script>
    <script>
        $(document).ready(function () {
            debugger
            $("#divload").css({ 'display': 'none' });
            var userAgent = navigator.userAgent;
            $('#UserAgent').val(userAgent);

            function readURL(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#ContentPlaceHolder1_imgProductImage')
                            .attr('src', e.target.result);
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            }
            $("#postedFile").change(function () {
                var file = $("#postedFile").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'Only Image file allowed !', 'warning').then((value) => {
                        $("#postedFile").val('');
                    })
                }
            });
            $("#postedPan").change(function () {
                var file = $("#postedPan").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'Only Image file allowed !', 'warning').then((value) => {
                        $("#postedPan").val('');
                    })
                }
            });
            $("#postedAadhar").change(function () {
                var file = $("#postedAadhar").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'Only Image file allowed !', 'warning').then((value) => {
                        $("#postedAadhar").val('');
                    })
                }
            });
            $("#postedCompanyCertificate").change(function () {
                var file = $("#postedCompanyCertificate").val();
                var len = file.length;
                var ext = file.slice(len - 4, len);
                if (ext.toLowerCase() == ".png" || ext.toLowerCase() == ".jpg" || ext.toLowerCase() == ".jpeg") {

                }
                else {
                    swal('Warning', 'Only Image file allowed !', 'warning').then((value) => {
                        $("#postedCompanyCertificate").val('');
                    })

                }
            });
            $("#LocationId").change(function () {
                $.ajax({
                    url: "/en/GetPinByLocation",
                    type: "POST",
                    dataType: 'JSON',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    data: { Id: $("#LocationId").val() },
                    success: function (data) {
                        console.log(data)
                        if (data != null) {
                            $("#PinCode").val(data);
                        }
                        else {

                        }
                    }
                })
            })
        })


        function checkPasswordStrength() {
            var number = /([0-9])/;
            var alphabetsC = /([A-Z])/;
            var alphabetsL = /([a-z])/;
            var special_characters = /([~,!,@@,#,$,%,^,&,*,-,_,+,=,?,>,<])/;
            if ($('#Password').val().length < 8) {
                iziToast.warning({
                    title: "Weak Password!",
                    message: "should be atleast 8 characters.",
                    position: "topRight",
                });
                $('#Password').val('');
                $('#ConfirmPassword').val('');
                $('#Password').focus();
                return false;
            } else {
                if ($('#Password').val().match(number) && $('#Password').val().match(alphabetsC) && $('#Password').val().match(alphabetsL) && $('#Password').val().match(special_characters)) {
                    return true;
                } else {
                    iziToast.warning({
                        title: "Weak Password!",
                        message: "Should include one capital alphabet, one small alphabet, numbers and special characters.",
                        position: "topRight",
                    });
                    $('#Password').val('');
                    $('#ConfirmPassword').val('');
                    $('#Password').focus();
                    return false;
                }
            }
        }
        $(document).ready(function () {
            $("input:text,form").attr("autocomplete", "off");
        })

    </script>
    @if (TempData["msg"] == "Saved")
    {
        <script type="text/javascript">
            window.onload = function () {
                iziToast.success({
                    title: "Success !",
                    message: "Record Saved ",
                    position: "topRight",
                });
            };

        </script>
    }
    @if (TempData["msg"] == "Not Registered !")
    {
        <script type="text/javascript">
            window.onload = function () {
                iziToast.error({
                    title: "Error !",
                    message: '@TempData["msg"]',
                    position: "topRight",
                });
            };

        </script>
    }
    @if (TempData["msg"] == "Already Registered !")
    {
        <script type="text/javascript">
            window.onload = function () {
                iziToast.warning({
                    title: "Warning !",
                    message: '@TempData["msg"]',
                    position: "topRight",
                });
            };

        </script>
    }
</body>

</html>