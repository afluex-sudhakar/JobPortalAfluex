@model Data.DTOs.AdminDashboardDTO
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .card .card-header h4 + .card-header-action .input-group .input-group-btn .btn, .card .card-header h4 + .card-header-form .input-group .input-group-btn .btn {
        margin-top: -1px;
        border-radius: 30px 30px 30px 30px !important;
    }
</style>
<div class="main-content">
    <section class="section">
        <ul class="breadcrumb breadcrumb-style ">
            <li class="breadcrumb-item">
                <h4 class="page-title m-b-0">Admin</h4>
            </li>
            <li class="breadcrumb-item">
                <a href="/Admin/Index">
                    <i data-feather="home"></i>
                </a>
            </li>
            <li class="breadcrumb-item">Dashboard</li>
        </ul>
        <div class="section-body">
            <div class="row ">
                <div class="col-xl-3 col-lg-6">
                    <div class="card l-bg-style1">
                        <div class="card-statistic-3">
                            <div class="card-icon card-icon-large"><i class="fa fa-award"></i></div>
                            <div class="card-content">
                                <h4 class="card-title">Total Job Seekers</h4>
                                <span>@Model.TotalJobSeekers</span>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="card l-bg-style2">
                        <div class="card-statistic-3">
                            <div class="card-icon card-icon-large"><i class="fa fa-briefcase"></i></div>
                            <div class="card-content">
                                <h4 class="card-title">Total Employer</h4>
                                <span>@Model.TotalEmployeer</span>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="card l-bg-style3">
                        <div class="card-statistic-3">
                            <div class="card-icon card-icon-large"><i class="fa fa-globe"></i></div>
                            <div class="card-content">
                                <h4 class="card-title">Total Job Posted</h4>
                                <span>@Model.TotalJobPosted</span>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-6">
                    <div class="card l-bg-style1">
                        <div class="card-statistic-3">
                            <div class="card-icon card-icon-large"><i class="fa fa-award"></i></div>
                            <div class="card-content">
                                <h4 class="card-title">Total Vacancies</h4>
                                <span>@Model.TotalVacancies</span>

                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
        <div class="section-body">
            <div class="row clearfix">
                <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 col-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Month Wise Hiring Details</h4>
                        </div>
                        <div class="card-body">
                            <div class="recent-report__chart">
                                <div id="chart1"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12 col-lg-6 col-xl-6 ">
                    <div class="card">
                        <div class="card-header">
                            <h4>Job Seeker Registration</h4>
                            @*<div class="card-header-action">
                                <ul class="nav nav-pills" role="tablist" id="chart-tabs">
                                    <li class="nav-item">
                                        <a class="nav-link active card-tab-style" data-toggle="tab" data-id="1" role="tab"
                                           aria-selected="true">2017</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link card-tab-style" data-toggle="tab" data-id="2" role="tab"
                                           aria-selected="false">2018</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link card-tab-style" data-toggle="tab" data-id="3" role="tab"
                                           aria-selected="false">2019</a>
                                    </li>
                                </ul>
                            </div>*@
                        </div>
                        <div class="card-body">
                            <div id="chartuser"></div>
                        </div>
                    </div>
                </div>
                @*<div class="col-lg-6 col-md-6 col-sm-12 col-xs-12 col-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Job Details</h4>
                        </div>
                        <div class="card-body">
                            <div class="recent-report__chart">
                                <div id="chart7"></div>
                            </div>
                        </div>
                    </div>
                </div>*@
            </div>
        </div>
        <div class="section-body">
            <div class="row">
                <div class="col-12 col-md-6 col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Recent Applied Job</h4>
                            <div class="card-header-action">
                                <div class="input-group">
                                    <div class="input-group-btn">
                                        <a class="btn btn-primary mr-1" href="/Admin/AvailableJobs">View More..</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-bordered table-md">
                                    <tr>
                                        <th>Sr No.</th>
                                        <th>Title</th>
                                        <th>Designation</th>
                                        <th>No of Vacancies</th>
                                        <th>No of Applicants</th>
                                        <th>Last Date</th>
                                    </tr>
                                    <tbody>
                                        @if (Model != null)
                                        {
                                            if (Model.RecentJobApplied != null)
                                            {
                                                int i = 1;
                                                foreach (var Item in Model.RecentJobApplied)
                                                {

                                                    <tr>
                                                        <td>
                                                            @i
                                                        </td>
                                                        <td>@Item.Title</td>
                                                        <td>@Item.Designation</td>
                                                        <td>@Item.NoOfVacancies</td>
                                                        <td>@Item.NoofApplicants</td>
                                                        <td>@Item.LastDate.Value.ToShortDateString()</td>
                                                    </tr>
                                                    i++;
                                                }
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>

                        </div>

                    </div>
                </div>
                <div class="col-12 col-md-6 col-lg-6">
                    <div class="card">
                        <div class="card-header">
                            <h4>Recent Job</h4>
                            <div class="card-header-action">
                                <div class="input-group">
                                    <div class="input-group-btn">
                                        <a class="btn btn-primary mr-1" href="/Admin/AvailableJobs">View More..</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body p-0">
                            <div class="table-responsive">
                                <table class="table table-bordered table-md">
                                    <tr>
                                        <th>Sr No.</th>
                                        <th>Title</th>
                                        <th>Description</th>
                                        <th>Posted Date</th>
                                        <th>Last Date</th>
                                    </tr>
                                    <tbody>
                                        @if (Model != null)
                                        {
                                            if (Model.jobList != null)
                                            {
                                                int i = 1;
                                                foreach (var Item in Model.jobList)
                                                {

                                                    <tr>
                                                        <td>
                                                            @i
                                                        </td>
                                                        <td>@Item.Title</td>
                                                        <td>@Item.ShortDescription</td>
                                                        <td>@Item.PostedDate.ToShortDateString()</td>
                                                        <td>@Item.LastDate.Value.ToShortDateString()</td>
                                                    </tr>
                                                    i++;
                                                }
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>
                </div>
            </div>


        </div>
    </section>
</div>


@section script
{
<script src="~/assets/bundles/apexcharts/apexcharts.min.js"></script>
<!-- Page Specific JS File -->
<script src="~/assets/js/page/chart-apexcharts.js"></script>
<script src="~/assets/bundles/apexcharts/apexcharts.min.js"></script>
<script src="~/assets/bundles/jqvmap/dist/jquery.vmap.min.js"></script>
<script src="~/assets/bundles/jqvmap/dist/maps/jquery.vmap.world.js"></script>
<!-- Page Specific JS File -->
<script src="~/assets/js/page/index.js"></script>
<script>

        function chart1() {
                $.ajax({
                    url: "/Admin/GetDashboardChart",
                    type: "GET",
                    dataType: 'JSON',
                    contentType: 'application/json;',
                    success: function (data) {
                        console.log(data)


                        var options = {
                            chart: {
                                height: 350,
                                type: "bar",
                            },
                            plotOptions: {
                                bar: {
                                    horizontal: false,
                                    endingShape: "rounded",
                                    columnWidth: "55%",
                                },
                            },
                            dataLabels: {
                                enabled: false,
                            },
                            stroke: {
                                show: true,
                                width: 2,
                                colors: ["transparent"],
                            },
                            series: [
                              {
                                  name: "No. of Vacancies",
                                  data: data.Vacancies,
                              },
                              {
                                  name: "No. of Job Seeker Hired &nbsp;&nbsp;&nbsp;&nbsp;(" + new Date().getFullYear() + ")",
                                  data: data.HiredJobSeekers,
                              },
                            ],
                            xaxis: {
                                categories: data.Months,
                                labels: {
                                    style: {
                                        colors: "#8e8da4",
                                    },
                                },
                            },
                            yaxis: {
                                title: {
                                    text: "Vacancies  (" + new Date().getFullYear() + ")",
                                },
                                labels: {
                                    style: {
                                        color: "#8e8da4",
                                    },
                                },
                            },
                            fill: {
                                opacity: 1,
                            },
                            tooltip: {
                                y: {
                                    formatter: function (val) {
                                        return "" + val + "";
                                    },
                                },
                            },
                        };

                        var chart = new ApexCharts(document.querySelector("#chart1"), options);

                        chart.render();
                    },
                    error: function (err) {

                    }
                });
        }
        function chartuser() {
            $.ajax({
                url: "/Admin/GetDashboardChartUserRegistredDetails",
                type: "GET",
                dataType: 'JSON',
                contentType: 'application/json;',
            success: function (data) {
                console.log(data)
               var options = {
    series: [
      {
        name: "No. of Users(Web)",
        data: data.WebUser,
      },
      {
          name: "No. of User(Mobile)",
          data: data.MobileUser,
      },
    ],
    chart: {
      height: 350,
      type: "area",
      dropShadow: {
        enabled: true,
        opacity: 0.3,
        blur: 5,
        left: -7,
        top: 22,
      },
      toolbar: {
        show: false,
      },
    },
    colors: ["#8b31d0", "#757575"],
    dataLabels: {
      enabled: false,
    },
    stroke: {
      show: true,
      curve: "smooth",
      width: 3,
      lineCap: "square",
    },
    xaxis: {
      axisBorder: {
        show: false,
      },
      axisTicks: {
        show: false,
      },
      crosshairs: {
        show: true,
      },
      categories: data.Months,
      labels: {
        offsetX: 0,
        offsetY: 5,
        style: {
          fontSize: "12px",
          fontFamily: "Segoe UI",
          cssClass: "apexcharts-xaxis-title",
        },
      },
    },
    yaxis: {
      labels: {
        offsetX: 0,
        offsetY: 0,
        style: {
          fontSize: "12px",
          fontFamily: "Segoe UI",
          cssClass: "apexcharts-yaxis-title",
        },
      },
    },
    legend: {
      position: "top",
      horizontalAlign: "right",
      markers: {
        width: 10,
        height: 10,
      },
      itemMargin: {
        horizontal: 0,
        vertical: 20,
      },
    },
    tooltip: {
      theme: "dark",
      marker: {
        show: true,
      },
      x: {
        show: true,
      },
    },
    fill: {
      type: "gradient",
      gradient: {
        type: "vertical",
        shadeIntensity: 1,
        inverseColors: !1,
        opacityFrom: 0.28,
        opacityTo: 0.05,
        stops: [45, 100],
      },
    },
  };

  var chart = new ApexCharts(document.querySelector("#chartuser"), options);
  chart.render();
            },
            error: function (err) {

            }
        });
        }
  //$('#chart-tabs a[data-toggle="tab"]').on("shown.bs.tab", function (e) {
  //  var id = $(this).attr("data-id");
  //  if (id && id === "1") {
  //    chart.updateSeries([
  //      {
  //        name: "income",
  //        data: [15, 48, 36, 20, 40, 60, 35, 20],
  //      },
  //      {
  //        name: "expense",
  //        data: [8, 22, 60, 35, 17, 24, 48, 37],
  //      },
  //    ]);
  //  } else if (id && id === "2") {
  //    chart.updateSeries([
  //      {
  //        name: "income",
  //        data: [19, 38, 43, 27, 44, 55, 32, 26],
  //      },
  //      {
  //        name: "expense",
  //        data: [12, 20, 58, 39, 21, 31, 41, 37],
  //      },
  //    ]);
  //  } else if (id && id === "3") {
  //    chart.updateSeries([
  //      {
  //        name: "income",
  //        data: [10, 28, 22, 32, 41, 51, 42, 30],
  //      },
  //      {
  //        name: "expense",
  //        data: [17, 22, 42, 35, 31, 28, 53, 31],
  //      },
  //    ]);
  //  }
  //});

</script>
  
}
